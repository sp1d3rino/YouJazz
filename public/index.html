<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- SEO Meta Tags -->
  <title>YouJazz - Online Gypsy Jazz Backing Track Composer & Lead Sheet Editor</title>
  <meta name="description"
    content="Create, compose and play gypsy jazz backing tracks online. Interactive lead sheet editor with swing and bossa nova rhythms. Save and share your jazz compositions." />
  <meta name="keywords"
    content="gypsy jazz, backing tracks, lead sheet, jazz composer, manouche guitar, swing, bossa nova, online music editor, chord progression" />
  <meta name="author" content="YouJazz" />
  <meta name="robots" content="noindex, follow" />
  <link rel="canonical" href="https://www.youjazz.org" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://www.youjazz.org" />
  <meta property="og:title" content="YouJazz - Gypsy Jazz Backing Track Composer" />
  <meta property="og:description"
    content="Create and play gypsy jazz backing tracks online with interactive lead sheet editor and real guitar audio." />
  <meta property="og:image" content="https://www.youjazz.org/images/og-image.png" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://www.youjazz.org" />
  <meta property="twitter:title" content="YouJazz - Gypsy Jazz Backing Track Composer" />
  <meta property="twitter:description" content="Create and play gypsy jazz backing tracks online." />
  <meta property="twitter:image" content="https://www.youjazz.org/images/twitter-image.png" />

  <!-- Structured Data JSON-LD -->
  <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "YouJazz",
        "url": "https://www.youjazz.org",
        "description": "Online gypsy jazz backing track composer and lead sheet editor",
        "applicationCategory": "MusicApplication",
        "operatingSystem": "Web Browser",
        "offers": {
          "@type": "Offer",
          "price": "0",
          "priceCurrency": "USD"
        },
        "creator": {
          "@type": "Organization",
          "name": "YouJazz"
        }
      }
</script>
  <link rel="stylesheet" href="styles.css" />
  <script src="libs/kali.min.js"></script>
  <link rel="icon" type="image/png" href="/images/favicon-96x96.png" sizes="96x96" />
  <link rel="icon" type="image/svg+xml" href="/images/favicon.svg" />
  <link rel="shortcut icon" href="/images/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png" />


  <!-- CRITICAL: Hide page content until auth check completes -->
  <style>
    body.auth-checking {
      visibility: hidden;
    }

    #auth-loader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #1a1a1a;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 99999;
      transition: opacity 0.3s ease;
    }

    #auth-loader.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .auth-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid rgba(255, 255, 255, 0.1);
      border-top-color: #e91e63;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>

  <!-- CRITICAL: Run auth check BEFORE page renders -->
  <script src="auth.js"></script>
</head>

<body class="auth-checking">
  <!-- Auth loader overlay -->
  <div id="auth-loader">
    <div class="auth-spinner"></div>


  </div>

  <!-- SEO: Hidden H1 for better indexing -->
  <h1 style="position: absolute; left: -9999px;">YouJazz - Online Gypsy Jazz Backing Track Composer and Lead Sheet
    Editor</h1>
  <!-- HAMBURGER MENU -->

  <div class="top-bar">
    <!-- Hamburger a sinistra -->
    <div class="menu-wrapper">
      <button id="hamburger-menu" class="icon-btn" title="Menu">
        <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>

      <!-- MENU DROPDOWN -->
      <div id="main-menu" class="main-menu">
        <div class="menu-item" id="user-item">

          <img id="user-pic" width="40" height="40" style="border-radius:50%;margin-top:8px;vertical-align:middle;">
          <span id="user-name" style="font-size:1.2em;"></span>
        </div>
        <div class="menu-divider"></div>
        <div class="menu-item" id="new-song">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 5v14M5 12h14" />
          </svg>
          New Song
        </div>
        <div class="menu-item" id="fav-search-toggle">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon
              points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
          </svg>
          Show Only Favourite Songs
        </div>

        <div class="menu-item" id="save-song">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
            <polyline points="17 21 17 13 7 13 7 21" />
            <polyline points="7 3 7 8 15 8" />
          </svg>
          Save Song
        </div>
        <div class="menu-item" id="save-as-song">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" />
            <polyline points="17 21 17 13 7 13 7 21" />
            <polyline points="7 3 7 8 15 8" />
            <circle cx="17" cy="7" r="3" fill="currentColor" />
          </svg>
          Save Song As
        </div>
        <!-- AGGIUNGI QUESTA NUOVA VOCE -->
        <div class="menu-item" id="rename-song">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z" />
          </svg>
          Rename Song
        </div>
        <div class="menu-item" id="delete-song">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="3 6 5 6 21 6" />
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
            <line x1="10" y1="11" x2="10" y2="17" />
            <line x1="14" y1="11" x2="14" y2="17" />
          </svg>
          Delete Song
        </div>
        <div class="menu-item" id="ai-reharmonize">
          ðŸ¤– Reharmonization
        </div>
        <div class="menu-divider"></div>
        <div class="menu-item danger" onclick="Auth.logout()">
          <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
            <polyline points="16 17 21 12 16 7" />
            <line x1="21" y1="12" x2="9" y2="12" />
          </svg>
          Logout
        </div>
      </div>
    </div>
    <!-- TITOLO CENTRATO CON EFFETTO NEON -->
    <h1 id="app-title" class="neon-text">YouJazz</h1>
    <!-- Spazio vuoto a destra per bilanciare -->
    <div class="top-bar-right"></div>
  </div>

  <div class="container">
    <header>
      <div class="controls">
        <div class="select-wrapper">
          <select id="song-list">
            <option value="">â€” Load Song â€”</option>
          </select>
        </div>

        <!-- Rimanenti controlli centrati -->

        <div class="created-by">created by </div>
      </div>
    </header>
  </div>

  <div class="main">
    <aside class="chord-palette">
      <div class="control-group">
        <h3 style="margin-top: 10px; color: #aaa;">Rhythm Style</h3>
        <div class="style-selector"></div>
      </div>
      <div style="margin-top:30px;display: flex; align-items: left; justify-content:left; gap: 12px; flex: 1;">
        <h3 style="color: #aaa;">BPM</h3>
      </div>
      <div style="display: flex;align-items: center; justify-content:center;">
        <label style="color: #aaa;"><span id="bpm-value">120</span></label>

        <input type="range" id="bpm-slider" min="60" max="280" value="120" step="5">
      </div>
      <h3 style="margin-top: 30px; color: #aaa;">Chords</h3>

      <div class="chord-list"></div>

      <h3 style="margin-top: 30px; color: #aaa;">Chord Extensions</h3>
      <div class="extension-list"></div>
    </aside>

    <section id="lead-sheet"></section>

    <aside class="player-controls">
      <button id="play" class="icon-btn play-btn" title="Play">
        <svg class="icon-svg" viewBox="0 0 24 24" fill="currentColor">
          <polygon points="5 3 19 12 5 21 5 3" />
        </svg>
      </button>

      <button id="stop" class="icon-btn stop-btn" title="Stop">
        <svg class="icon-svg" viewBox="0 0 24 24" fill="currentColor">
          <rect x="6" y="6" width="12" height="12" />
        </svg>
      </button>

      <button id="add-row" class="icon-btn add-row-btn" title="Add Row">
        <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="18" height="18" rx="2" />
          <line x1="3" y1="9" x2="21" y2="9" />
          <line x1="3" y1="15" x2="21" y2="15" />
          <line x1="12" y1="15" x2="12" y2="21" />
          <line x1="9" y1="18" x2="15" y2="18" />
        </svg>
      </button>

      <button id="fav-btn" class="toggle-btn fav-btn" title="Favourites">
        <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon
            points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
        </svg>
      </button>
      <button id="public-toggle-btn" class="toggle-btn public-btn" title="Public/Private">
        <svg class="icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10" />
          <path
            d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" />
        </svg>
      </button>


    </aside>
  </div>
  </div>

  <!-- Spinner durante caricamento audio -->
  <div id="audio-spinner" class="audio-spinner hidden">
    <div class="spinner"></div>
    <p>Loading audio files...</p>
  </div>

  <div id="ai-spinner" class="audio-spinner hidden">
    <div class="spinner"></div>
    <p>AI is elaborating a new version...</p>
  </div>

  <!-- Modal creazione griglia (nascosto all'avvio) -->
  <div id="grid-setup-modal" class="modal hidden">
    <div class="modal-content">
      <h2>New Lead Sheet</h2>
      <p>Choose grid size:</p>
      <div class="grid-inputs">
        <label>Rows:
          <input type="number" id="grid-rows" min="1" max="10" value="4">
        </label>
        <label>Columns:
          <input type="number" id="grid-cols" min="1" max="10" value="4">
        </label>
      </div>
      <button id="create-grid">Create Grid</button>
    </div>
  </div>

  <script src="player.js"></script>
  <script src="db.js"></script>
  <script src="app.js"></script>
  <script src="message.js"></script>

  <!-- YOUJAZZ MESSAGE BOX -->
  <div class="yj-message-overlay" id="yj-message">
    <div class="yj-message-box">
      <div class="yj-message-icon" id="yj-icon">â™ª</div>
      <h2 class="yj-message-title" id="yj-title">YouJazz</h2>
      <p class="yj-message-text" id="yj-text"></p>
      <button class="yj-message-btn" id="yj-ok">OK</button>
    </div>
  </div>

  <!-- AGGIUNGI QUESTO FOOTER -->
  <footer class="app-footer">
    <p>Â© YouJazz.org 2025 - All rights reserved</p>
  </footer>
</body>

</html>